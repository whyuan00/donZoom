import React, {useState} from 'react';
import {Image, Pressable, StyleSheet, Text, View} from 'react-native';
import Svg, {Path} from 'react-native-svg';
import {colors} from '@/constants/colors';
import {fonts} from '@/constants/font';
import {createBottomTabNavigator} from '@react-navigation/bottom-tabs';
import DrawStackNavigator from './DrawStackNavigator';
import MainNavigator from './MainNavigator';
import MissionStackNavigator from './MissionStackNavigator';
import QuizStackNavigator from './QuizStackNavigator';
import HomeScreen from '@/views/screens/HomeScreen';
import HomeStackNavigator from './HomeStackNavigator';
import InvestStackNavigator from './InvestStackNavigator';
import MyInformationNavigator from './MyInformationNavigator';

interface TabButtonProps {
  icon: string;
  label: string;
  isActive: boolean;
  onPress: () => void;
}

const TabButton: React.FC<TabButtonProps> = ({
  icon,
  label,
  isActive,
  onPress,
}) => (
  <Pressable style={styles.buttonContainer} onPress={onPress}>
    <Svg width="24" height="25" viewBox="0 0 24 25" fill="none">
      <Path d={icon} fill={isActive ? colors.BLACK : colors.GRAY_50} />
    </Svg>
    <Text style={[styles.text, isActive && styles.activeText]}>{label}</Text>
  </Pressable>
);

interface TabInfo {
  key: string;
  icon: string;
  label: string;
}

const Tab = createBottomTabNavigator();

const Footer: React.FC = ({navigation}: any) => {
  const [activeTab, setActiveTab] = useState<string>('home');

  const tabs: TabInfo[] = [
    {
      key: 'Main',
      icon: 'M21 11.75V20.75C21 20.9489 20.921 21.1397 20.7803 21.2803C20.6397 21.421 20.4489 21.5 20.25 21.5H15C14.8011 21.5 14.6103 21.421 14.4697 21.2803C14.329 21.1397 14.25 20.9489 14.25 20.75V15.875C14.25 15.7756 14.2105 15.6802 14.1402 15.6098C14.0698 15.5395 13.9745 15.5 13.875 15.5H10.125C10.0255 15.5 9.93016 15.5395 9.85983 15.6098C9.78951 15.6802 9.75 15.7756 9.75 15.875V20.75C9.75 20.9489 9.67098 21.1397 9.53033 21.2803C9.38968 21.421 9.19891 21.5 9 21.5H3.75C3.55109 21.5 3.36032 21.421 3.21967 21.2803C3.07902 21.1397 3 20.9489 3 20.75V11.75C3.00018 11.3523 3.15834 10.9709 3.43969 10.6897L10.9397 3.18969C11.221 2.9086 11.6023 2.7507 12 2.7507C12.3977 2.7507 12.779 2.9086 13.0603 3.18969L20.5603 10.6897C20.8417 10.9709 20.9998 11.3523 21 11.75Z',
      label: '홈',
    },
    {
      key: 'Quiz',
      icon: 'M21.1744 10.1394C20.8209 9.77 20.4553 9.38938 20.3175 9.05469C20.19 8.74813 20.1825 8.24 20.175 7.74781C20.1609 6.83281 20.1459 5.79594 19.425 5.075C18.7041 4.35406 17.6672 4.33906 16.7522 4.325C16.26 4.3175 15.7519 4.31 15.4453 4.1825C15.1116 4.04469 14.73 3.67906 14.3606 3.32562C13.7137 2.70406 12.9788 2 12 2C11.0212 2 10.2872 2.70406 9.63937 3.32562C9.27 3.67906 8.88938 4.04469 8.55469 4.1825C8.25 4.31 7.74 4.3175 7.24781 4.325C6.33281 4.33906 5.29594 4.35406 4.575 5.075C3.85406 5.79594 3.84375 6.83281 3.825 7.74781C3.8175 8.24 3.81 8.74813 3.6825 9.05469C3.54469 9.38844 3.17906 9.77 2.82562 10.1394C2.20406 10.7863 1.5 11.5212 1.5 12.5C1.5 13.4788 2.20406 14.2128 2.82562 14.8606C3.17906 15.23 3.54469 15.6106 3.6825 15.9453C3.81 16.2519 3.8175 16.76 3.825 17.2522C3.83906 18.1672 3.85406 19.2041 4.575 19.925C5.29594 20.6459 6.33281 20.6609 7.24781 20.675C7.74 20.6825 8.24813 20.69 8.55469 20.8175C8.88844 20.9553 9.27 21.3209 9.63937 21.6744C10.2863 22.2959 11.0212 23 12 23C12.9788 23 13.7128 22.2959 14.3606 21.6744C14.73 21.3209 15.1106 20.9553 15.4453 20.8175C15.7519 20.69 16.26 20.6825 16.7522 20.675C17.6672 20.6609 18.7041 20.6459 19.425 19.925C20.1459 19.2041 20.1609 18.1672 20.175 17.2522C20.1825 16.76 20.19 16.2519 20.3175 15.9453C20.4553 15.6116 20.8209 15.23 21.1744 14.8606C21.7959 14.2137 22.5 13.4788 22.5 12.5C22.5 11.5212 21.7959 10.7872 21.1744 10.1394ZM12 18.5C11.7775 18.5 11.56 18.434 11.375 18.3104C11.19 18.1868 11.0458 18.0111 10.9606 17.8055C10.8755 17.6 10.8532 17.3738 10.8966 17.1555C10.94 16.9373 11.0472 16.7368 11.2045 16.5795C11.3618 16.4222 11.5623 16.315 11.7805 16.2716C11.9988 16.2282 12.225 16.2505 12.4305 16.3356C12.6361 16.4208 12.8118 16.565 12.9354 16.75C13.059 16.935 13.125 17.1525 13.125 17.375C13.125 17.6734 13.0065 17.9595 12.7955 18.1705C12.5845 18.3815 12.2984 18.5 12 18.5ZM12.75 13.9325V14C12.75 14.1989 12.671 14.3897 12.5303 14.5303C12.3897 14.671 12.1989 14.75 12 14.75C11.8011 14.75 11.6103 14.671 11.4697 14.5303C11.329 14.3897 11.25 14.1989 11.25 14V13.25C11.25 13.0511 11.329 12.8603 11.4697 12.7197C11.6103 12.579 11.8011 12.5 12 12.5C13.2403 12.5 14.25 11.6562 14.25 10.625C14.25 9.59375 13.2403 8.75 12 8.75C10.7597 8.75 9.75 9.59375 9.75 10.625V11C9.75 11.1989 9.67098 11.3897 9.53033 11.5303C9.38968 11.671 9.19891 11.75 9 11.75C8.80109 11.75 8.61032 11.671 8.46967 11.5303C8.32902 11.3897 8.25 11.1989 8.25 11V10.625C8.25 8.76406 9.93188 7.25 12 7.25C14.0681 7.25 15.75 8.76406 15.75 10.625C15.75 12.2544 14.46 13.6184 12.75 13.9325Z',
      label: '퀴즈',
    },
    {
      key: 'Invest',
      icon: 'M21.75 20C21.75 20.1989 21.671 20.3897 21.5303 20.5303C21.3897 20.671 21.1989 20.75 21 20.75H3C2.80109 20.75 2.61032 20.671 2.46967 20.5303C2.32902 20.3897 2.25 20.1989 2.25 20C2.25 19.8011 2.32902 19.6103 2.46967 19.4697C2.61032 19.329 2.80109 19.25 3 19.25H3.75V13.25C3.75 13.0511 3.82902 12.8603 3.96967 12.7197C4.11032 12.579 4.30109 12.5 4.5 12.5H6.75C6.94891 12.5 7.13968 12.579 7.28033 12.7197C7.42098 12.8603 7.5 13.0511 7.5 13.25V19.25H9V8.75C9 8.55109 9.07902 8.36032 9.21967 8.21967C9.36032 8.07902 9.55109 8 9.75 8H12.75C12.9489 8 13.1397 8.07902 13.2803 8.21967C13.421 8.36032 13.5 8.55109 13.5 8.75V19.25H15V4.25C15 4.05109 15.079 3.86032 15.2197 3.71967C15.3603 3.57902 15.5511 3.5 15.75 3.5H19.5C19.6989 3.5 19.8897 3.57902 20.0303 3.71967C20.171 3.86032 20.25 4.05109 20.25 4.25V19.25H21C21.1989 19.25 21.3897 19.329 21.5303 19.4697C21.671 19.6103 21.75 19.8011 21.75 20Z',
      label: '모의투자',
    },
    {
      key: 'Setting',
      icon: 'M14.625 12.5C14.625 13.0192 14.471 13.5267 14.1826 13.9584C13.8942 14.3901 13.4842 14.7265 13.0045 14.9252C12.5249 15.1239 11.9971 15.1758 11.4879 15.0746C10.9787 14.9733 10.511 14.7233 10.1438 14.3562C9.77673 13.989 9.52673 13.5213 9.42544 13.0121C9.32415 12.5029 9.37614 11.9751 9.57482 11.4955C9.7735 11.0158 10.11 10.6058 10.5416 10.3174C10.9733 10.029 11.4808 9.875 12 9.875C12.6962 9.875 13.3639 10.1516 13.8562 10.6438C14.3484 11.1361 14.625 11.8038 14.625 12.5ZM4.5 9.875C3.98083 9.875 3.47331 10.029 3.04163 10.3174C2.60995 10.6058 2.2735 11.0158 2.07482 11.4955C1.87614 11.9751 1.82415 12.5029 1.92544 13.0121C2.02673 13.5213 2.27673 13.989 2.64385 14.3562C3.01096 14.7233 3.47869 14.9733 3.98789 15.0746C4.49709 15.1758 5.02489 15.1239 5.50455 14.9252C5.9842 14.7265 6.39417 14.3901 6.68261 13.9584C6.97105 13.5267 7.125 13.0192 7.125 12.5C7.125 11.8038 6.84844 11.1361 6.35616 10.6438C5.86387 10.1516 5.19619 9.875 4.5 9.875ZM19.5 9.875C18.9808 9.875 18.4733 10.029 18.0416 10.3174C17.61 10.6058 17.2735 11.0158 17.0748 11.4955C16.8761 11.9751 16.8242 12.5029 16.9254 13.0121C17.0267 13.5213 17.2767 13.989 17.6438 14.3562C18.011 14.7233 18.4787 14.9733 18.9879 15.0746C19.4971 15.1758 20.0249 15.1239 20.5045 14.9252C20.9842 14.7265 21.3942 14.3901 21.6826 13.9584C21.971 13.5267 22.125 13.0192 22.125 12.5C22.125 12.1553 22.0571 11.8139 21.9252 11.4955C21.7933 11.177 21.5999 10.8876 21.3562 10.6438C21.1124 10.4001 20.823 10.2067 20.5045 10.0748C20.1861 9.9429 19.8447 9.875 19.5 9.875Z',
      label: '더보기',
    },
  ];

  return (
    <Tab.Navigator
      screenOptions={({route}) => ({
        tabBarIcon: ({focused, color, size}) => {
          const tabInfo = tabs.find(tab => tab.key === route.name);

          if (!tabInfo) return null;

          return (
            <View
              style={{
                width: size,
                height: size,
                justifyContent: 'center',
                alignItems: 'center',
              }}>
              <Svg width={size} height={size} viewBox="0 0 24 25" fill="none">
                <Path d={tabInfo.icon} fill={color} />
              </Svg>
            </View>
          );
        },
        tabBarActiveTintColor: 'black',
        tabBarInactiveTintColor: 'gray',
        tabBarShowLabel: false, // 라벨을 숨깁니다
      })}>
      <Tab.Screen
        name="Main"
        component={HomeStackNavigator}
        options={{headerShown: false}}
      />
      <Tab.Screen
        name="Quiz"
        component={QuizStackNavigator}
        options={{headerShown: false}}
      />
      <Tab.Screen
        name="Invest"
        component={InvestStackNavigator}
        options={{headerShown: false}}
      />
      <Tab.Screen
        name="Setting"
        component={MyInformationNavigator}
        options={{headerShown: false}}
      />
    </Tab.Navigator>
  );
};

const styles = StyleSheet.create({
  container: {
    position: 'absolute',
    bottom: 0,
    width: '100%',
    height: 56,
    flexDirection: 'row',
    backgroundColor: colors.WHITE,
    borderTopWidth: 1,
    borderTopColor: colors.GRAY_25,
  },
  buttonContainer: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
  },
  text: {
    fontFamily: fonts.LIGHT,
    color: colors.GRAY_50,
    fontSize: 12,
  },
  activeText: {
    color: colors.BLACK,
    fontFamily: fonts.LIGHT,
  },
});

export default Footer;
